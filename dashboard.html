<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="icon" href="assets/icons/icon-192.png" type="image/png">
  <script src="auth.js"></script>
  <title>Dashboard</title>
  <style>
    .dashboard-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .card {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      text-align: center;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.15);
    }

    .card i { font-size: 26px; margin-bottom: 10px; color: #000; }
    .card h3 { font-size: 24px; margin-bottom: 5px; font-weight: bold; }
    .card p { font-size: 15px; color: #666; }

    .chart-container, .calendar-container { margin: 40px 0; }

    .calendar-navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .calendar-navigation h4 { margin: 0; font-size: 18px; font-weight: bold; text-align: center; flex: 1; }
    .calendar-navigation button {
      background: none; border: none; font-size: 18px; cursor: pointer; color: #000000; padding: 5px 15px;
    }

    .calendar-wrapper {
      display: grid;
      grid-template-columns: 1fr;
      gap: 30px;
      padding: 20px 20px;
      justify-content: center;
    }
    @media (min-width: 768px) {
      .calendar-wrapper {
        grid-template-columns: repeat(2, 1fr);
        gap: 30px;
        padding: 20px 40px;
      }
    }
    @media (min-width: 1024px) {
      .calendar-wrapper {
        grid-template-columns: repeat(4, 1fr);
        gap: 25px;
        padding: 20px 80px;
      }
    }

    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      text-align: center;
      padding: 10px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      width: 100%;
      max-width: 320px;
    }
    .calendar .day { font-weight: bold; color: #000000; }
    .calendar .date { padding: 8px 0; border-radius: 6px; background: #f5f5f5; }
    .calendar .date.today { background: #aa2626; color: #fff; font-weight: bold; }

    /* Dark Mode */
    body.dark .card,
    body.dark .calendar { background-color: #2f2f2f; color: #fff; }
    body.dark .card i,
    body.dark .card p,
    body.dark .calendar .day { color: #fff; }
    body.dark .calendar .date { background-color: #444; }
    body.dark canvas { background-color: #2f2f2f; }

    .user-profile {
      position: relative;
      display: inline-block;
      margin-top: 8px;
      margin-right: 50px;
      margin-left: 30px;
    }
    .user-icon { cursor: pointer; color: #000; }
    .user-dropdown {
      display: none; position: absolute; background-color: white; min-width: 50px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.2); z-index: 1; border-radius: 8px; padding: 10px;
    }
    body.dark .user-dropdown { background-color: #444; color: #fff; }

    .toast {
      visibility: hidden; min-width: 250px; background-color: #000000; color: white; text-align: center;
      border-radius: 8px; padding: 12px 20px; position: fixed; z-index: 9999; right: 30px; bottom: 30px;
      font-size: 16px; box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2); opacity: 0; transition: opacity 0.5s ease, bottom 0.5s ease;
    }
    .toast.show { visibility: visible; opacity: 1; bottom: 50px; }

    body.dark #reservationList div { background-color: #2f2f2f; color: #fff; }
    body.dark #reservationList div { border: 1px solid #444; box-shadow: none; }

    .delete-btn {
      margin-top: 8px; background-color: #000000; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;
    }
    body.dark .delete-btn { background-color: #000; color: #fff; }

    .popup { display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
    .popup-content {
      background: white; padding: 25px 30px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      text-align: center; max-width: 300px; width: 90%; position: relative;
    }
    .popup-content h3 { margin-bottom: 10px; color: #000000; }
    .popup-content p { margin: 6px 0; font-size: 16px; }
    .close-popup { position: absolute; top: 10px; right: 15px; font-size: 20px; cursor: pointer; color: #666; }
    body.dark .popup-content { background-color: #2f2f2f; color: #fff; }
    body.dark .close-popup { color: #fff; }

    .trend-indicator { font-size: 13px; margin-top: 6px; }
    .trend-indicator.up { color: green; }
    .trend-indicator.down { color: red; }
    body.dark .trend-indicator:not(.up):not(.down) { color: #fff; }
    body.dark .trend-indicator.up { color: green !important; }
    body.dark .trend-indicator.down { color: red !important; }

    .notification-wrapper { position: relative; display: inline-block; margin-left: 20px; }
    .notification-bell { cursor: pointer; font-size: 20px; position: relative; }
    .badge {
      position: absolute; top: -8px; right: -10px; background: red; color: white; border-radius: 50%;
      padding: 3px 6px; font-size: 10px; font-weight: bold;
    }
    .notification-panel {
      display: none; position: absolute; top: 30px; right: 0; width: 250px; background: white; border: 1px solid #ddd;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15); border-radius: 8px; z-index: 999; padding: 10px;
    }
    .notification-panel ul { list-style: none; padding: 0; margin: 0; max-height: 200px; overflow-y: auto; }
    .notification-panel li { padding: 8px 5px; border-bottom: 1px solid #eee; font-size: 14px; }
    .notif-title { font-weight: bold; margin-bottom: 8px; }
    body.dark .notification-panel { background: #2f2f2f !important; color: #fff; }
    body.dark .notification-panel li,
    body.dark .notification-panel .notif-title { color: #fff; }

    body.dark #reservationContainer > div { background-color: #2f2f2f !important; color: #fff !important; box-shadow: none !important; border: 1px solid #555 !important; }
    body.dark #reservationContainer > div * { color: #fff !important; }

    .reservation-card {
      background: #fff; border-radius: 12px; padding: 1rem; box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      max-width: 100%; display: flex; flex-direction: column; justify-content: space-between;
    }
    .reservation-card button { margin-top: 10px; }

    /* Base (phones/tablets): keep centered */
.reservation-wrapper {
  width: 100%;
  display: flex;
  justify-content: center;
}

#reservationContainer {
  display: flex;
  flex-wrap: nowrap;
  gap: 1.2rem;
  padding: 1rem 0;        /* remove left padding bias */
  width: 100%;
  max-width: 1200px;
  justify-content: center; /* default center */
}

/* Desktop: left-align cards and allow full width */
@media (min-width: 1100px) {
  .reservation-wrapper { justify-content: flex-start; }

  #reservationContainer {
    justify-content: flex-start !important; /* was center !important */
    max-width: none;                         /* let it hug the left edge */
    padding-left: 0;
  }
}


    .calendar-scroll-wrapper { overflow-x: auto; padding-bottom: 10px; }
    .calendar-wrapper { display: flex; gap: 1rem; min-width: max-content; }
    .calendar { background: var(--card-bg); padding: 1rem; border-radius: 10px; box-shadow: 0 0 4px rgba(0,0,0,0.1); min-width: 240px; flex-shrink: 0; }
  </style>
  <script src="assets/chart.min.js"></script>
</head>
<body>
  <script>
  const user = JSON.parse(localStorage.getItem("loggedUser"));
  if (!user || !user.role) { window.location.href = "index.html"; }
  </script>

  <div class="dashboard-container">
    <aside class="sidebar">
      <div class="sidebar-logo"><img src="assets/sista-sista-logo.png" alt="Sista Sista Logo"/></div>
      <nav class="sidebar-nav">
        <a href="dashboard.html" class="active"><i class="fas fa-home"></i> Dashboard</a>
        <a href="clients.html"><i class="fas fa-users"></i> Clients</a>
        <a href="services.html"><i class="fas fa-scissors"></i> Services</a>
        <a href="reviews.html"><i class="fa fa-comments"></i> Reviews</a>
        <a href="reservations.html"><i class="fas fa-calendar-check"></i> Reservations</a>
        <a href="reports.html"><i class="fas fa-chart-line"></i> Reports</a>
        <a href="revenue.html" class="active"><i class="fa fa-table"></i> Revenue Summary</a>
        <a href="index.html" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
      </nav>
    </aside>

    <main class="main-content" style="padding: 1rem; max-width: 100%; overflow-x: hidden;">
      <div class="dashboard-header">
        <div class="theme-toggle-wrapper">
          <span>Dark Theme</span>
          <label class="theme-switch"><input type="checkbox" id="toggleDark" /><span class="slider"></span></label>
        </div>

        <div class="notification-wrapper">
          <div id="notificationBell" class="notification-bell">
            <i id="notificationIcon" class="fas fa-bell"></i>
            <span id="notificationBadge" class="badge" style="display: none;">!</span>
          </div>
          <div id="notificationPanel" class="notification-panel">
            <p class="notif-title">Upcoming Reservations</p>
            <ul id="notificationList"></ul>
          </div>
        </div>

        <div class="user-profile">
          <div class="user-icon" id="userIcon"><i class="fas fa-user-circle fa-2x"></i></div>
          <div class="user-dropdown" id="userDropdown"><p id="loggedInUser">Loading...</p></div>
        </div>
      </div>

      <div class="dashboard-body">
        <h2 id="welcomeMsg">Welcome!</h2>

        <div class="dashboard-cards">
          <div class="card"><i class="fas fa-users"></i><h3 id="totalClients">0</h3><p>Total Clients</p></div>
          <div class="card" id="todaysVisitsCard"><i class="fas fa-map-marker-alt"></i><h3 id="todaysVisits">0</h3><p>Today's Visits</p></div>
          <div class="card"><i class="fas fa-scissors"></i><h3 id="availableServices">0</h3><p>Total Services</p></div>
          <div class="card admin-only" id="revenueCard">
            <i class="fas fa-coins"></i>
            <div><h3 id="monthlyRevenue">GHS 0.00</h3><p>Monthly Revenue</p></div>
          </div>
          <div class="card admin-only" id="dailyRevenueCard">
            <i class="fas fa-coins"></i>
            <h3 id="dailyRevenue">GHS 0.00</h3>
            <p>Today’s Revenue</p>
            <p id="revenueTrend" class="trend-indicator"></p>
          </div>
        </div>

        <div class="chart-container">
          <h3>Weekly Visit Trend</h3>
          <canvas id="visitTrendChart" height="100"></canvas>
        </div>

        <!-- Upcoming Reservations Section -->
        <div class="reservation-section" style="margin-top: 40px;">
          <h3 style="margin-bottom: 15px;">Upcoming Reservations</h3>
          <div class="calendar-navigation">
            <button id="resPrevBtn"><i class="fas fa-chevron-left"></i></button>
            <h4 id="resPageLabel">Page 1</h4>
            <button id="resNextBtn"><i class="fas fa-chevron-right"></i></button>
          </div>
          <div class="reservation-wrapper">
            <div id="reservationContainer"><!-- Reservation cards go here --></div>
          </div>
        </div>

        <div class="calendar-container">
          <h3>Mini Calendar</h3>
          <div class="calendar-navigation">
            <button id="prevBtn"><i class="fas fa-chevron-left"></i></button>
            <h4 id="calendarTitle">Calendar</h4>
            <button id="nextBtn"><i class="fas fa-chevron-right"></i></button>
          </div>
          <div class="calendar-scroll-wrapper">
            <div id="calendarWrapper" class="calendar-wrapper"></div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <div class="app-footer">
    &copy; 2025 Sista Sista Salon & Spa. All rights reserved.<br/>
    Built by <strong><a href="https://hanatechnologies.org/" target="_blank" style="color: inherit;">H-A-N-A Technologies</a></strong>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const user = JSON.parse(localStorage.getItem("loggedUser"));
      const showRevenue = user?.role === "admin";

      const revenueCard = document.getElementById("revenueCard");
      if (revenueCard && !showRevenue) revenueCard.style.display = "none";

      const dailyRevenueCard = document.getElementById("dailyRevenueCard");
      if (dailyRevenueCard && !showRevenue) dailyRevenueCard.style.display = "none";

      const weekdays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
      const visitCounts = [0, 0, 0, 0, 0, 0, 0];
      let allVisits = [];

      document.getElementById("loggedInUser").textContent = user.username || "Unknown";

      document.getElementById("userIcon").addEventListener("click", () => {
        const dropdown = document.getElementById("userDropdown");
        dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
      });

      const request = indexedDB.open("SalonDB", 1);
      request.onsuccess = function (e) {
        db = e.target.result;
        loadUpcomingReservations(db);

        allVisits = [];
        let todayVisits = 0;
        let monthlyRevenue = 0;
        const serviceSet = new Set();
        const visitCounts = Array(7).fill(0);
        const uniqueClientKeys = new Set();

        const todayDateStr = new Date().toISOString().split("T")[0];
        const currentMonth = new Date().getMonth();
        const currentYear = new Date().getFullYear();

        const tx = db.transaction("clients", "readonly");
        const store = tx.objectStore("clients");

        store.openCursor().onsuccess = function (e) {
          const cursor = e.target.result;
          if (cursor) {
            const c = cursor.value;
            const visitDate = new Date(c.date);
            const visitDateStr = visitDate.toISOString().split("T")[0];
            const visitMonth = visitDate.getMonth();
            const visitYear = visitDate.getFullYear();
            const dayIndex = visitDate.getDay();

            allVisits.push({ date: visitDateStr });

            if (visitDateStr === todayDateStr) todayVisits++;
            if (visitMonth === currentMonth && visitYear === currentYear && c.amount) {
              monthlyRevenue += parseFloat(c.amount);
            }
            if (c.service) serviceSet.add(c.service);
            visitCounts[dayIndex]++;
            uniqueClientKeys.add(`${c.name}_${c.phone}`);

            cursor.continue();
          } else {
            document.getElementById("todaysVisits").textContent = todayVisits;
            document.getElementById("monthlyRevenue").textContent = `GHS ${monthlyRevenue.toFixed(2)}`;
            document.getElementById("availableServices").textContent = serviceSet.size;
            document.getElementById("totalClients").textContent = uniqueClientKeys.size;

            new Chart(document.getElementById("visitTrendChart"), {
              type: "line",
              data: {
                labels: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                datasets: [{
                  data: visitCounts,
                  backgroundColor: "rgba(170,38,38,0.1)",
                  borderColor: "#aa2626",
                  fill: true,
                  tension: 0.4,
                  pointRadius: 5
                }]
              },
              options: { plugins: { legend: { display: false } } }
            });

            // visits for mini calendar
            let allVisits = [];
            function loadVisits(callback) {
              const tx = db.transaction("clients", "readonly");
              const store = tx.objectStore("clients");
              const request = store.getAll();
              request.onsuccess = () => {
                allVisits = request.result || [];
                if (typeof callback === "function") callback();
              };
              request.onerror = () => {
                allVisits = [];
                if (typeof callback === "function") callback();
              };
            }

            loadVisits(() => { renderCalendar(offset); });
          }
        };
      };

      if (typeof getTotalClients === "function") {
        getTotalClients(total => { document.getElementById("totalClients").textContent = total; });
      }

      const calendarWrapper = document.getElementById("calendarWrapper");
      const calendarTitle = document.getElementById("calendarTitle");
      let offset = 0;
      const baseDate = new Date();

      function renderCalendar(monthOffset) {
        calendarWrapper.innerHTML = "";
        const displayMonths = window.innerWidth <= 1024 ? 3 : 4;
        const start = new Date(baseDate.getFullYear(), baseDate.getMonth() + monthOffset, 1);
        const monthNames = [..."January February March April May June July August September October November December".split(" ")];

        const startMonthIndex = start.getMonth();
        const endDate = new Date(start.getFullYear(), startMonthIndex + displayMonths, 0);
        const endMonthIndex = endDate.getMonth();
        const endYear = endDate.getFullYear();

        const displayYear = start.getFullYear() === endYear ? start.getFullYear() : `${start.getFullYear()} - ${endYear}`;
        calendarTitle.textContent = `${monthNames[startMonthIndex]} - ${monthNames[endMonthIndex]} ${displayYear}`;

        for (let m = 0; m < displayMonths; m++) {
          const date = new Date(start.getFullYear(), start.getMonth() + m, 1);
          const calendar = document.createElement("div");
          calendar.className = "calendar";
          ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(d => {
            const day = document.createElement("div");
            day.className = "day";
            day.textContent = d;
            calendar.appendChild(day);
          });

          const firstDay = date.getDay();
          const lastDate = new Date(date.getFullYear(), date.getMonth()+1, 0).getDate();

          for (let i = 0; i < firstDay; i++) calendar.appendChild(document.createElement("div"));

          for (let d = 1; d <= lastDate; d++) {
            const el = document.createElement("div");
            el.className = "date";
            el.textContent = d;
            const full = new Date(date.getFullYear(), date.getMonth(), d).toISOString().split("T")[0];
            const localToday = new Date().toLocaleDateString("en-CA");
            if (full === localToday) el.classList.add("today");

            const visits = allVisits.filter(v => v.date === full);
            if (visits.length > 0) {
              el.style.border = "2px solid #aa2626";
              el.style.fontWeight = "bold";
            }

            el.addEventListener("click", () => {
              document.getElementById("popupDate").textContent = `Date: ${full}`;
              document.getElementById("popupCount").textContent = `Total Visits: ${visits.length}`;
              document.getElementById("visitPopup").style.display = "flex";
            });

            calendar.appendChild(el);
          }

          calendarWrapper.appendChild(calendar);
        }
      }

      document.getElementById("prevBtn").onclick = () => { offset -= 3; renderCalendar(offset); };
      document.getElementById("nextBtn").onclick = () => { offset += 3; renderCalendar(offset); };

      const exportBtn = document.createElement("button");
      exportBtn.textContent = "Export Calendar Summary";
      Object.assign(exportBtn.style, {
        margin: "20px auto 10px", display: "block", background: "#aa2626",
        color: "#fff", border: "none", padding: "10px 20px", borderRadius: "6px", cursor: "pointer"
      });
      exportBtn.onclick = () => {
        const summary = {};
        allVisits.forEach(v => { summary[v.date] = (summary[v.date] || 0) + 1 });
        const csv = "Date,Total Visits\n" + Object.entries(summary).map(([d, c]) => `${d},${c}`).join("\n");
        const blob = new Blob([csv], { type: "text/csv" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "calendar_summary.csv";
        a.click();
      };
      document.querySelector(".calendar-container").appendChild(exportBtn);
    });

    const scrollLeftBtn = document.getElementById("scrollLeft");
    if (scrollLeftBtn) {
      scrollLeftBtn.addEventListener("click", () => {
        const container = document.getElementById("reservationContainer");
        container.scrollBy({ left: -300, behavior: "smooth" });
      });
    }
    const scrollRightBtn = document.getElementById("scrollRight");
    if (scrollRightBtn) {
      scrollRightBtn.addEventListener("click", () => {
        const container = document.getElementById("reservationContainer");
        container.scrollBy({ left: 300, behavior: "smooth" });
      });
    }
  </script>

  <script>
    function closeVisitPopup() {
      document.getElementById("visitPopup").style.display = "none";
    }
  </script>

  <div id="toast" class="toast">Saved!</div>

  <div id="visitPopup" class="popup">
    <div class="popup-content">
      <span class="close-popup" onclick="closeVisitPopup()">&times;</span>
      <h3>Visit Summary</h3>
      <p id="popupDate">Date: </p>
      <p id="popupCount">Total Visits: </p>
    </div>
  </div>

  <script>
    window.onload = () => {
      if (typeof BroadcastChannel !== "undefined") {
        const dashboardChannel = new BroadcastChannel("dashboardChannel");
        dashboardChannel.onmessage = (event) => {
          if (event.data === "update") {
            if (typeof updateDashboardStatsFromClients === "function") {
              updateDashboardStatsFromClients();
            }
          }
        };
      }
    };
  </script>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      const visitCard = document.getElementById("todaysVisitsCard");
      if (visitCard) visitCard.style.display = "none";
    });
  </script>

  <script>
    let allReservations = [];
    let currentPage = 0;

    // ⭐ CHANGE: dynamic desktop page size (tablet stays 3)
    const getPageSize = () => {
      if (window.innerWidth >= 1440) return 5;   // very wide desktop
      if (window.innerWidth >= 1200) return 4;   // normal desktop
      return 3;                                  // tablets & below (unchanged)
    };
    let pageSize = getPageSize();

    window.addEventListener("resize", () => {
      const next = getPageSize();
      if (next !== pageSize) {
        pageSize = next;
        renderReservationPage();
      }
    });

    function renderReservationPage() {
      const container = document.getElementById("reservationContainer");
      const pageLabel = document.getElementById("resPageLabel");
      container.innerHTML = "";

      // align left on desktop, centered on tablet/phone
const isDesktop = window.innerWidth >= 1100;
container.style.justifyContent = isDesktop ? "flex-start" : "center";


      const start = currentPage * pageSize;
      const end = start + pageSize;
      const pageItems = allReservations.slice(start, end);

      if (pageItems.length === 0) {
        container.innerHTML = `<div style="background:#fff;padding:15px;border-radius:8px;text-align:center;">No upcoming reservations.</div>`;
        pageLabel.textContent = "Page 1";
        return;
      }

      const user = JSON.parse(localStorage.getItem("loggedUser") || "{}");
      const isAdmin = user.role === "admin";

      pageItems.forEach(r => {
        const card = document.createElement("div");
        card.style = `
          width: 250px;
          background: #fff;
          border-radius: 8px;
          padding: 15px 20px;
          box-shadow: 0 2px 6px rgba(0,0,0,0.1);
          display: flex;
          flex-direction: column;
          font-size: 14px;
        `;
        card.innerHTML = `
          <strong>${r.clientName}</strong>
          <span><i class="fas fa-phone-alt"></i> ${r.phone}</span>
          <span><i class="fas fa-calendar-alt"></i> ${r.date} at ${r.time}</span>
          <span><i class="fas fa-scissors"></i> ${r.service}</span>
          ${isAdmin ? `<button onclick="deleteReservation(${r.id})" class="delete-btn">Delete</button>` : ""}
        `;
        container.appendChild(card);
      });

      const totalPages = Math.ceil(allReservations.length / pageSize) || 1;
      pageLabel.textContent = `Page ${Math.min(currentPage + 1, totalPages)} of ${totalPages}`;
    }

    function loadUpcomingReservations(db) {
      const tx = db.transaction("reservations", "readonly");
      const store = tx.objectStore("reservations");
      const request = store.getAll();

      request.onsuccess = function () {
        const reservations = request.result || [];
        const today = new Date().toISOString().split("T")[0];

        allReservations = reservations
          .filter(r => r.date >= today)
          .sort((a, b) => a.date.localeCompare(b.date));

        currentPage = 0;
        renderReservationPage();
      };
    }

    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("resPrevBtn").addEventListener("click", () => {
        if (currentPage > 0) { currentPage--; renderReservationPage(); }
      });
      document.getElementById("resNextBtn").addEventListener("click", () => {
        if ((currentPage + 1) * pageSize < allReservations.length) {
          currentPage++; renderReservationPage();
        }
      });
    });
  </script>

  <script src="app.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const user = JSON.parse(localStorage.getItem("loggedUser"));
      const name = user?.username || "User";
      const welcome = document.getElementById("welcomeMsg");
      if (welcome) welcome.textContent = `🎉 Welcome ${name} to Sista Sista Salon & Spa`;
    });
  </script>
</body>
</html>
